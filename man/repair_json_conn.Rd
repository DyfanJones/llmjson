% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/connection.R
\name{repair_json_conn}
\alias{repair_json_conn}
\title{Repair malformed JSON from a connection}
\usage{
repair_json_conn(
  conn,
  schema = NULL,
  return_objects = FALSE,
  ensure_ascii = TRUE,
  int64 = "double"
)
}
\arguments{
\item{conn}{A connection object (e.g., from \code{file()}, \code{url()}, \code{gzfile()}, etc.)}

\item{schema}{Optional schema definition for validation and type conversion}

\item{return_objects}{Logical indicating whether to return R objects (TRUE) or JSON string (FALSE, default)}

\item{ensure_ascii}{Logical; if TRUE, escape non-ASCII characters}

\item{int64}{Policy for handling 64-bit integers: "double" (default, may lose precision), "string" (preserves exact value), or "bit64" (requires bit64 package)}
}
\value{
A character string containing the repaired JSON, or an R object if return_objects is TRUE
}
\description{
This function reads JSON from an R connection (such as a file, URL, or pipe)
and repairs it. The connection is read and the content is passed to
\code{repair_json_str()} for repair.
}
\examples{
\dontrun{
# Read from a file connection
conn <- file("malformed.json", "r")
result <- repair_json_conn(conn)
close(conn)

# Read from a URL
conn <- url("https://example.com/data.json")
result <- repair_json_conn(conn, return_objects = TRUE)
close(conn)

# Read from a compressed file
conn <- gzfile("data.json.gz", "r")
result <- repair_json_conn(conn, return_objects = TRUE, int64 = "string")
close(conn)

# Or use with() to ensure connection is closed
result <- with(file("malformed.json", "r"), repair_json_conn(conn))
}
}
\seealso{
\code{\link[=repair_json_str]{repair_json_str()}}, \code{\link[=repair_json_file]{repair_json_file()}}, \code{\link[=repair_json_raw]{repair_json_raw()}}, \code{\link[=schema]{schema()}}, \code{\link[=json_schema]{json_schema()}}
}
